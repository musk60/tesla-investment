{"version":3,"sources":["turbopack:///[project]/styles/Dashboard.module.css [app-ssr] (css module)","../../../../app/dashboard/page.js"],"sourcesContent":["__turbopack_context__.v({\n  \"amount\": \"Dashboard-module__2YNnkq__amount\",\n  \"card\": \"Dashboard-module__2YNnkq__card\",\n  \"date\": \"Dashboard-module__2YNnkq__date\",\n  \"label\": \"Dashboard-module__2YNnkq__label\",\n  \"loading\": \"Dashboard-module__2YNnkq__loading\",\n  \"negative\": \"Dashboard-module__2YNnkq__negative\",\n  \"noInvestments\": \"Dashboard-module__2YNnkq__noInvestments\",\n  \"overview\": \"Dashboard-module__2YNnkq__overview\",\n  \"pendingBadge\": \"Dashboard-module__2YNnkq__pendingBadge\",\n  \"pendingRow\": \"Dashboard-module__2YNnkq__pendingRow\",\n  \"pendingText\": \"Dashboard-module__2YNnkq__pendingText\",\n  \"planInfo\": \"Dashboard-module__2YNnkq__planInfo\",\n  \"planRow\": \"Dashboard-module__2YNnkq__planRow\",\n  \"planStats\": \"Dashboard-module__2YNnkq__planStats\",\n  \"portfolio\": \"Dashboard-module__2YNnkq__portfolio\",\n  \"positive\": \"Dashboard-module__2YNnkq__positive\",\n  \"statGroup\": \"Dashboard-module__2YNnkq__statGroup\",\n  \"subtitle\": \"Dashboard-module__2YNnkq__subtitle\",\n});\n","'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport styles from '../../styles/Dashboard.module.css';\r\n\r\nexport default function Dashboard() {\r\n    const [user, setUser] = useState(null);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        // Check for logged in user\r\n        const storedUser = localStorage.getItem('user');\r\n        if (!storedUser) {\r\n            router.push('/login');\r\n            return;\r\n        }\r\n\r\n        const userData = JSON.parse(storedUser);\r\n        fetchUser(userData.email);\r\n    }, []);\r\n\r\n    const fetchUser = async (email) => {\r\n        try {\r\n            const res = await fetch(`/api/user?email=${email}`);\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setUser(data);\r\n            } else {\r\n                // Handle error or logout\r\n                localStorage.removeItem('user');\r\n                router.push('/login');\r\n            }\r\n        } catch (e) {\r\n            console.error('Failed to fetch user data');\r\n        }\r\n    };\r\n\r\n    if (!user) return <div className={styles.loading}>Loading...</div>;\r\n\r\n    const totalReturn = user.currentValue - user.totalInvested;\r\n    const returnPercentage = user.totalInvested > 0\r\n        ? ((totalReturn / user.totalInvested) * 100).toFixed(2)\r\n        : '0.00';\r\n\r\n    return (\r\n        <div className={styles.dashboard}>\r\n            <h1 className={styles.title}>Welcome back, {user.name}</h1>\r\n\r\n            <div className={styles.overview}>\r\n                <div className={styles.card}>\r\n                    <h3>Total Invested</h3>\r\n                    <p className={styles.amount}>${user.totalInvested.toLocaleString()}</p>\r\n                </div>\r\n                <div className={styles.card}>\r\n                    <h3>Current Value</h3>\r\n                    <p className={styles.amount}>${user.currentValue.toLocaleString()}</p>\r\n                </div>\r\n                <div className={styles.card}>\r\n                    <h3>Total Return</h3>\r\n                    <p className={`${styles.amount} ${totalReturn >= 0 ? styles.positive : styles.negative}`}>\r\n                        {totalReturn >= 0 ? '+' : ''}${totalReturn.toLocaleString()} ({returnPercentage}%)\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <h2 className={styles.subtitle}>Your Portfolio</h2>\r\n            {user.activePlans.length === 0 ? (\r\n                <p className={styles.noInvestments}>You have no active investments. <a href=\"/investments\">Start investing now.</a></p>\r\n            ) : (\r\n                <div className={styles.portfolio}>\r\n                    {user.activePlans.map(plan => (\r\n                        <div key={plan.id} className={`${styles.planRow} ${plan.status === 'pending' ? styles.pendingRow : ''}`}>\r\n                            <div className={styles.planInfo}>\r\n                                <h4>\r\n                                    {plan.name}\r\n                                    {plan.status === 'pending' && <span className={styles.pendingBadge}>Pending Approval</span>}\r\n                                </h4>\r\n                                <span className={styles.date}>Invested on {plan.dateInvested}</span>\r\n                            </div>\r\n                            <div className={styles.planStats}>\r\n                                <div className={styles.statGroup}>\r\n                                    <span className={styles.label}>Invested</span>\r\n                                    <span>${plan.investedAmount.toLocaleString()}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}