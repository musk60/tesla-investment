module.exports=[23026,a=>{a.v({activeChat:"AdminChat-module__iRfAKa__activeChat",adminMessage:"AdminChat-module__iRfAKa__adminMessage",chatArea:"AdminChat-module__iRfAKa__chatArea",chatId:"AdminChat-module__iRfAKa__chatId",chatItem:"AdminChat-module__iRfAKa__chatItem",chatList:"AdminChat-module__iRfAKa__chatList",container:"AdminChat-module__iRfAKa__container",input:"AdminChat-module__iRfAKa__input",inputArea:"AdminChat-module__iRfAKa__inputArea",lastMessage:"AdminChat-module__iRfAKa__lastMessage",message:"AdminChat-module__iRfAKa__message",messages:"AdminChat-module__iRfAKa__messages",noChatSelected:"AdminChat-module__iRfAKa__noChatSelected",sendButton:"AdminChat-module__iRfAKa__sendButton",timestamp:"AdminChat-module__iRfAKa__timestamp",userMessage:"AdminChat-module__iRfAKa__userMessage"})},43047,a=>{"use strict";var b=a.i(86637),c=a.i(89722),d=a.i(23026);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),l=(0,c.useRef)(null);(0,c.useEffect)(()=>{m();let a=setInterval(m,5e3);return()=>clearInterval(a)},[]),(0,c.useEffect)(()=>{if(f){n(f);let a=setInterval(()=>n(f),3e3);return()=>clearInterval(a)}},[f]);let m=async()=>{try{let a=await fetch("/api/chat");if(a.ok){let b=await a.json();e(b.chats||[])}}catch(a){console.error("Error fetching chats:",a)}},n=async a=>{try{let b=await fetch(`/api/chat?chatId=${a}`);if(b.ok){let a=await b.json();i(a.messages||[])}}catch(a){console.error("Error fetching messages:",a)}};(0,c.useEffect)(()=>{l.current?.scrollIntoView({behavior:"smooth"})},[h]);let o=async a=>{if(a.preventDefault(),!j.trim()||!f)return;let b={text:j,sender:"admin",timestamp:new Date().toISOString()};i([...h,b]),k("");try{await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatId:f,message:b})}),n(f)}catch(a){console.error("Error sending message:",a)}};return(0,b.jsxs)("div",{className:d.default.container,children:[(0,b.jsxs)("div",{className:d.default.chatList,children:[a.map(a=>(0,b.jsxs)("div",{className:`${d.default.chatItem} ${f===a.id?d.default.activeChat:""}`,onClick:()=>g(a.id),children:[(0,b.jsxs)("div",{className:d.default.chatId,children:["User: ",a.id.substr(5)]}),(0,b.jsx)("div",{className:d.default.lastMessage,children:a.lastMessage?.text||"No messages"}),(0,b.jsx)("div",{className:d.default.timestamp,children:a.lastMessage?.timestamp?new Date(a.lastMessage.timestamp).toLocaleTimeString():""})]},a.id)),0===a.length&&(0,b.jsx)("div",{style:{padding:"1rem",color:"#888",textAlign:"center"},children:"No active chats"})]}),(0,b.jsx)("div",{className:d.default.chatArea,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:d.default.messages,children:[h.map((a,c)=>(0,b.jsx)("div",{className:`${d.default.message} ${"admin"===a.sender?d.default.adminMessage:d.default.userMessage}`,children:a.text},c)),(0,b.jsx)("div",{ref:l})]}),(0,b.jsxs)("form",{onSubmit:o,className:d.default.inputArea,children:[(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),placeholder:"Type a reply...",className:d.default.input}),(0,b.jsx)("button",{type:"submit",disabled:!j.trim(),className:d.default.sendButton,children:"Send"})]})]}):(0,b.jsx)("div",{className:d.default.noChatSelected,children:"Select a chat to view messages"})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=tesla-investment_4bc06ffc._.js.map