module.exports=[81422,a=>{a.v({backLink:"AdminUserEdit-module__SFbYDq__backLink",buttonGroup:"AdminUserEdit-module__SFbYDq__buttonGroup",cancelButton:"AdminUserEdit-module__SFbYDq__cancelButton",container:"AdminUserEdit-module__SFbYDq__container",form:"AdminUserEdit-module__SFbYDq__form",formGroup:"AdminUserEdit-module__SFbYDq__formGroup",header:"AdminUserEdit-module__SFbYDq__header",input:"AdminUserEdit-module__SFbYDq__input",label:"AdminUserEdit-module__SFbYDq__label",message:"AdminUserEdit-module__SFbYDq__message",saveButton:"AdminUserEdit-module__SFbYDq__saveButton",section:"AdminUserEdit-module__SFbYDq__section"})},7025,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(81422);function g({params:a}){let{id:g}=(0,c.use)(a),[h,i]=(0,c.useState)({name:"",email:"",totalInvested:0,currentValue:0}),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),p=(0,e.useRouter)();(0,c.useEffect)(()=>{localStorage.getItem("adminAuth")||p.push("/admin/login"),q()},[g,p]);let q=async()=>{try{let a=await fetch(`/api/admin/users/${g}`);if(a.ok){let b=await a.json();i(b)}else o("User not found")}catch(a){console.error("Failed to fetch user:",a)}finally{k(!1)}},r=async a=>{a.preventDefault(),m(!0),o("");try{(await fetch(`/api/admin/users/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok?(o("User updated successfully!"),setTimeout(()=>p.push("/admin/users"),1500)):o("Failed to update user")}catch(a){console.error("Failed to update user:",a),o("Error updating user")}finally{m(!1)}},s=a=>{let{name:b,value:c}=a.target;i(a=>({...a,[b]:c}))};return j?(0,b.jsx)("div",{style:{color:"white",padding:"2rem"},children:"Loading..."}):(0,b.jsxs)("div",{className:f.default.container,children:[(0,b.jsxs)("div",{className:f.default.header,children:[(0,b.jsx)("h1",{children:"Edit User"}),(0,b.jsx)(d.default,{href:"/admin/users",className:f.default.backLink,children:"â† Back to Users"})]}),n&&(0,b.jsx)("div",{className:f.default.message,children:n}),(0,b.jsxs)("form",{onSubmit:r,className:f.default.form,children:[(0,b.jsxs)("div",{className:f.default.section,children:[(0,b.jsx)("h2",{children:"Account Details"}),(0,b.jsxs)("div",{className:f.default.formGroup,children:[(0,b.jsx)("label",{className:f.default.label,children:"Full Name"}),(0,b.jsx)("input",{type:"text",name:"name",value:h.name,onChange:s,className:f.default.input,required:!0})]}),(0,b.jsxs)("div",{className:f.default.formGroup,children:[(0,b.jsx)("label",{className:f.default.label,children:"Email"}),(0,b.jsx)("input",{type:"email",name:"email",value:h.email,onChange:s,className:f.default.input,required:!0})]})]}),(0,b.jsxs)("div",{className:f.default.section,children:[(0,b.jsx)("h2",{children:"Portfolio Management"}),(0,b.jsxs)("div",{className:f.default.formGroup,children:[(0,b.jsx)("label",{className:f.default.label,children:"Total Invested ($)"}),(0,b.jsx)("input",{type:"number",name:"totalInvested",value:h.totalInvested,onChange:s,className:f.default.input,min:"0",step:"0.01"})]}),(0,b.jsxs)("div",{className:f.default.formGroup,children:[(0,b.jsx)("label",{className:f.default.label,children:"Current Value ($)"}),(0,b.jsx)("input",{type:"number",name:"currentValue",value:h.currentValue,onChange:s,className:f.default.input,min:"0",step:"0.01"})]})]}),(0,b.jsxs)("div",{className:f.default.section,children:[(0,b.jsx)("h2",{children:"Investments"}),h.activePlans&&h.activePlans.length>0?(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:h.activePlans.map((a,c)=>(0,b.jsxs)("div",{style:{padding:"1rem",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"4px",border:"pending"===a.status?"1px solid orange":"1px solid rgba(255,255,255,0.1)"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,b.jsx)("span",{style:{fontWeight:"bold"},children:a.name}),(0,b.jsx)("span",{style:{color:"pending"===a.status?"orange":"#4caf50",textTransform:"uppercase",fontSize:"0.8rem"},children:a.status||"Active"})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",fontSize:"0.9rem",color:"#ccc"},children:[(0,b.jsxs)("div",{children:["Amount: $",a.investedAmount]}),(0,b.jsxs)("div",{children:["Value: $",a.currentValue]}),(0,b.jsxs)("div",{children:["Date: ",a.dateInvested]})]}),(0,b.jsxs)("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:["pending"===a.status&&(0,b.jsx)("button",{type:"button",onClick:()=>{let a,b;"active"!==(b=(a=[...h.activePlans])[c]).status&&(b.status="active",i(c=>({...c,activePlans:a,totalInvested:Number(c.totalInvested)+Number(b.investedAmount),currentValue:Number(c.currentValue)+Number(b.currentValue)})))},style:{padding:"0.4rem 1rem",backgroundColor:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Approve"}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;let d,e,f,g,j=prompt("Enter new amount:",a.investedAmount);j&&!isNaN(j)&&(b=Number(j),f=Number((e=(d=[...h.activePlans])[c]).investedAmount),g=Number(b)-f,e.investedAmount=Number(b),e.currentValue=Number(b),"pending"!==e.status?i(a=>({...a,activePlans:d,totalInvested:Number(a.totalInvested)+g,currentValue:Number(a.currentValue)+g})):i(a=>({...a,activePlans:d})))},style:{padding:"0.4rem 1rem",backgroundColor:"transparent",border:"1px solid #ccc",color:"white",borderRadius:"4px",cursor:"pointer"},children:"Edit Amount"}),(0,b.jsx)("button",{type:"button",onClick:()=>(a=>{if(!confirm("Are you sure you want to remove this investment?"))return;let b=[...h.activePlans],c=b[a];b.splice(a,1),"pending"!==c.status?i(a=>({...a,activePlans:b,totalInvested:Number(a.totalInvested)-Number(c.investedAmount),currentValue:Number(a.currentValue)-Number(c.currentValue)})):i(a=>({...a,activePlans:b}))})(c),style:{padding:"0.4rem 1rem",backgroundColor:"transparent",border:"1px solid #f44336",color:"#f44336",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]})]},c))}):(0,b.jsx)("p",{style:{color:"#999"},children:"No investments found."})]}),(0,b.jsxs)("div",{className:f.default.buttonGroup,children:[(0,b.jsx)("button",{type:"submit",className:f.default.saveButton,disabled:l,children:l?"Saving...":"Save Changes"}),(0,b.jsx)(d.default,{href:"/admin/users",className:f.default.cancelButton,children:"Cancel"})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_2fe04456._.js.map