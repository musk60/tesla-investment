{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER-PC/OneDrive/Documents/ANTIGRA/tesla-investment/lib/data.js"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst dataDirectory = path.join(process.cwd(), 'data');\r\nconst investmentsFilePath = path.join(dataDirectory, 'investments.json');\r\n\r\nexport function getInvestments() {\r\n    const fileContents = fs.readFileSync(investmentsFilePath, 'utf8');\r\n    return JSON.parse(fileContents);\r\n}\r\n\r\nexport function saveInvestments(investments) {\r\n    fs.writeFileSync(investmentsFilePath, JSON.stringify(investments, null, 2));\r\n}\r\n\r\nconst usersFilePath = path.join(dataDirectory, 'users.json');\r\n\r\nexport function getUsers() {\r\n    if (!fs.existsSync(usersFilePath)) {\r\n        return [];\r\n    }\r\n    const fileContents = fs.readFileSync(usersFilePath, 'utf8');\r\n    return JSON.parse(fileContents);\r\n}\r\n\r\nexport function saveUsers(users) {\r\n    fs.writeFileSync(usersFilePath, JSON.stringify(users, null, 2));\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAC/C,MAAM,sBAAsB,4GAAI,CAAC,IAAI,CAAC,eAAe;AAE9C,SAAS;IACZ,MAAM,eAAe,wGAAE,CAAC,YAAY,CAAC,qBAAqB;IAC1D,OAAO,KAAK,KAAK,CAAC;AACtB;AAEO,SAAS,gBAAgB,WAAW;IACvC,wGAAE,CAAC,aAAa,CAAC,qBAAqB,KAAK,SAAS,CAAC,aAAa,MAAM;AAC5E;AAEA,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,eAAe;AAExC,SAAS;IACZ,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,gBAAgB;QAC/B,OAAO,EAAE;IACb;IACA,MAAM,eAAe,wGAAE,CAAC,YAAY,CAAC,eAAe;IACpD,OAAO,KAAK,KAAK,CAAC;AACtB;AAEO,SAAS,UAAU,KAAK;IAC3B,wGAAE,CAAC,aAAa,CAAC,eAAe,KAAK,SAAS,CAAC,OAAO,MAAM;AAChE"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER-PC/OneDrive/Documents/ANTIGRA/tesla-investment/app/api/admin/users/%5Bid%5D/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { getUsers, saveUsers } from '../../../../../lib/data';\r\n\r\nexport async function GET(request, { params }) {\r\n    const { id } = await params;\r\n    const users = getUsers();\r\n    const user = users.find(u => u.id === id);\r\n\r\n    if (!user) {\r\n        return NextResponse.json({ error: 'User not found' }, { status: 404 });\r\n    }\r\n\r\n    // Return user without password\r\n    const { password, ...safeUser } = user;\r\n    return NextResponse.json(safeUser);\r\n}\r\n\r\nexport async function PUT(request, { params }) {\r\n    const { id } = await params;\r\n    const data = await request.json();\r\n    const users = getUsers();\r\n    const userIndex = users.findIndex(u => u.id === id);\r\n\r\n    if (userIndex === -1) {\r\n        return NextResponse.json({ error: 'User not found' }, { status: 404 });\r\n    }\r\n\r\n    // Update allowed fields\r\n    const updatedUser = {\r\n        ...users[userIndex],\r\n        name: data.name || users[userIndex].name,\r\n        email: data.email || users[userIndex].email,\r\n        totalInvested: data.totalInvested !== undefined ? Number(data.totalInvested) : users[userIndex].totalInvested,\r\n        currentValue: data.currentValue !== undefined ? Number(data.currentValue) : users[userIndex].currentValue,\r\n        activePlans: data.activePlans || users[userIndex].activePlans // Allow updating activePlans\r\n    };\r\n\r\n    users[userIndex] = updatedUser;\r\n    saveUsers(users);\r\n\r\n    const { password, ...safeUser } = updatedUser;\r\n    return NextResponse.json(safeUser);\r\n}\r\n\r\nexport async function DELETE(request, { params }) {\r\n    const { id } = await params;\r\n    const users = getUsers();\r\n    const userIndex = users.findIndex(u => u.id === id);\r\n\r\n    if (userIndex === -1) {\r\n        return NextResponse.json({ error: 'User not found' }, { status: 404 });\r\n    }\r\n\r\n    // Remove user from array\r\n    users.splice(userIndex, 1);\r\n    saveUsers(users);\r\n\r\n    return NextResponse.json({ success: true });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAO,EAAE,EAAE,MAAM,EAAE;IACzC,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,QAAQ,IAAA,gJAAQ;IACtB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAEtC,IAAI,CAAC,MAAM;QACP,OAAO,uKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,+BAA+B;IAC/B,MAAM,EAAE,QAAQ,EAAE,GAAG,UAAU,GAAG;IAClC,OAAO,uKAAY,CAAC,IAAI,CAAC;AAC7B;AAEO,eAAe,IAAI,OAAO,EAAE,EAAE,MAAM,EAAE;IACzC,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,OAAO,MAAM,QAAQ,IAAI;IAC/B,MAAM,QAAQ,IAAA,gJAAQ;IACtB,MAAM,YAAY,MAAM,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAEhD,IAAI,cAAc,CAAC,GAAG;QAClB,OAAO,uKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,wBAAwB;IACxB,MAAM,cAAc;QAChB,GAAG,KAAK,CAAC,UAAU;QACnB,MAAM,KAAK,IAAI,IAAI,KAAK,CAAC,UAAU,CAAC,IAAI;QACxC,OAAO,KAAK,KAAK,IAAI,KAAK,CAAC,UAAU,CAAC,KAAK;QAC3C,eAAe,KAAK,aAAa,KAAK,YAAY,OAAO,KAAK,aAAa,IAAI,KAAK,CAAC,UAAU,CAAC,aAAa;QAC7G,cAAc,KAAK,YAAY,KAAK,YAAY,OAAO,KAAK,YAAY,IAAI,KAAK,CAAC,UAAU,CAAC,YAAY;QACzG,aAAa,KAAK,WAAW,IAAI,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,6BAA6B;IAC/F;IAEA,KAAK,CAAC,UAAU,GAAG;IACnB,IAAA,iJAAS,EAAC;IAEV,MAAM,EAAE,QAAQ,EAAE,GAAG,UAAU,GAAG;IAClC,OAAO,uKAAY,CAAC,IAAI,CAAC;AAC7B;AAEO,eAAe,OAAO,OAAO,EAAE,EAAE,MAAM,EAAE;IAC5C,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,QAAQ,IAAA,gJAAQ;IACtB,MAAM,YAAY,MAAM,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAEhD,IAAI,cAAc,CAAC,GAAG;QAClB,OAAO,uKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,yBAAyB;IACzB,MAAM,MAAM,CAAC,WAAW;IACxB,IAAA,iJAAS,EAAC;IAEV,OAAO,uKAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAK;AAC7C"}}]
}