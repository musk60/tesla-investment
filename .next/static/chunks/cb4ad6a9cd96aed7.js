(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20354,e=>{e.v({backLink:"AdminUserEdit-module__S7YNfW__backLink",buttonGroup:"AdminUserEdit-module__S7YNfW__buttonGroup",cancelButton:"AdminUserEdit-module__S7YNfW__cancelButton",container:"AdminUserEdit-module__S7YNfW__container",form:"AdminUserEdit-module__S7YNfW__form",formGroup:"AdminUserEdit-module__S7YNfW__formGroup",header:"AdminUserEdit-module__S7YNfW__header",input:"AdminUserEdit-module__S7YNfW__input",label:"AdminUserEdit-module__S7YNfW__label",message:"AdminUserEdit-module__S7YNfW__message",saveButton:"AdminUserEdit-module__S7YNfW__saveButton",section:"AdminUserEdit-module__S7YNfW__section"})},68171,e=>{"use strict";var t=e.i(30445),a=e.i(87483),s=e.i(70768),n=e.i(94082),r=e.i(20354);function l({params:e}){let{id:l}=(0,a.use)(e),[i,d]=(0,a.useState)({name:"",email:"",totalInvested:0,currentValue:0}),[u,o]=(0,a.useState)(!0),[c,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),h=(0,n.useRouter)();(0,a.useEffect)(()=>{localStorage.getItem("adminAuth")||h.push("/admin/login"),v()},[l,h]);let v=async()=>{try{let e=await fetch(`/api/admin/users/${l}`);if(e.ok){let t=await e.json();d(t)}else f("User not found")}catch(e){console.error("Failed to fetch user:",e)}finally{o(!1)}},b=async e=>{e.preventDefault(),m(!0),f("");try{(await fetch(`/api/admin/users/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok?(f("User updated successfully!"),setTimeout(()=>h.push("/admin/users"),1500)):f("Failed to update user")}catch(e){console.error("Failed to update user:",e),f("Error updating user")}finally{m(!1)}},x=e=>{let{name:t,value:a}=e.target;d(e=>({...e,[t]:a}))};return u?(0,t.jsx)("div",{style:{color:"white",padding:"2rem"},children:"Loading..."}):(0,t.jsxs)("div",{className:r.default.container,children:[(0,t.jsxs)("div",{className:r.default.header,children:[(0,t.jsx)("h1",{children:"Edit User"}),(0,t.jsx)(s.default,{href:"/admin/users",className:r.default.backLink,children:"â† Back to Users"})]}),p&&(0,t.jsx)("div",{className:r.default.message,children:p}),(0,t.jsxs)("form",{onSubmit:b,className:r.default.form,children:[(0,t.jsxs)("div",{className:r.default.section,children:[(0,t.jsx)("h2",{children:"Account Details"}),(0,t.jsxs)("div",{className:r.default.formGroup,children:[(0,t.jsx)("label",{className:r.default.label,children:"Full Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:i.name,onChange:x,className:r.default.input,required:!0})]}),(0,t.jsxs)("div",{className:r.default.formGroup,children:[(0,t.jsx)("label",{className:r.default.label,children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:i.email,onChange:x,className:r.default.input,required:!0})]})]}),(0,t.jsxs)("div",{className:r.default.section,children:[(0,t.jsx)("h2",{children:"Portfolio Management"}),(0,t.jsxs)("div",{className:r.default.formGroup,children:[(0,t.jsx)("label",{className:r.default.label,children:"Total Invested ($)"}),(0,t.jsx)("input",{type:"number",name:"totalInvested",value:i.totalInvested,onChange:x,className:r.default.input,min:"0",step:"0.01"})]}),(0,t.jsxs)("div",{className:r.default.formGroup,children:[(0,t.jsx)("label",{className:r.default.label,children:"Current Value ($)"}),(0,t.jsx)("input",{type:"number",name:"currentValue",value:i.currentValue,onChange:x,className:r.default.input,min:"0",step:"0.01"})]})]}),(0,t.jsxs)("div",{className:r.default.section,children:[(0,t.jsx)("h2",{children:"Investments"}),i.activePlans&&i.activePlans.length>0?(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:i.activePlans.map((e,a)=>(0,t.jsxs)("div",{style:{padding:"1rem",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"4px",border:"pending"===e.status?"1px solid orange":"1px solid rgba(255,255,255,0.1)"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,t.jsx)("span",{style:{fontWeight:"bold"},children:e.name}),(0,t.jsx)("span",{style:{color:"pending"===e.status?"orange":"#4caf50",textTransform:"uppercase",fontSize:"0.8rem"},children:e.status||"Active"})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",fontSize:"0.9rem",color:"#ccc"},children:[(0,t.jsxs)("div",{children:["Amount: $",e.investedAmount]}),(0,t.jsxs)("div",{children:["Value: $",e.currentValue]}),(0,t.jsxs)("div",{children:["Date: ",e.dateInvested]})]}),(0,t.jsxs)("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:["pending"===e.status&&(0,t.jsx)("button",{type:"button",onClick:()=>{let e,t;"active"!==(t=(e=[...i.activePlans])[a]).status&&(t.status="active",d(a=>({...a,activePlans:e,totalInvested:Number(a.totalInvested)+Number(t.investedAmount),currentValue:Number(a.currentValue)+Number(t.currentValue)})))},style:{padding:"0.4rem 1rem",backgroundColor:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Approve"}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;let s,n,r,l,u=prompt("Enter new amount:",e.investedAmount);u&&!isNaN(u)&&(t=Number(u),r=Number((n=(s=[...i.activePlans])[a]).investedAmount),l=Number(t)-r,n.investedAmount=Number(t),n.currentValue=Number(t),"pending"!==n.status?d(e=>({...e,activePlans:s,totalInvested:Number(e.totalInvested)+l,currentValue:Number(e.currentValue)+l})):d(e=>({...e,activePlans:s})))},style:{padding:"0.4rem 1rem",backgroundColor:"transparent",border:"1px solid #ccc",color:"white",borderRadius:"4px",cursor:"pointer"},children:"Edit Amount"}),(0,t.jsx)("button",{type:"button",onClick:()=>(e=>{if(!confirm("Are you sure you want to remove this investment?"))return;let t=[...i.activePlans],a=t[e];t.splice(e,1),"pending"!==a.status?d(e=>({...e,activePlans:t,totalInvested:Number(e.totalInvested)-Number(a.investedAmount),currentValue:Number(e.currentValue)-Number(a.currentValue)})):d(e=>({...e,activePlans:t}))})(a),style:{padding:"0.4rem 1rem",backgroundColor:"transparent",border:"1px solid #f44336",color:"#f44336",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]})]},a))}):(0,t.jsx)("p",{style:{color:"#999"},children:"No investments found."})]}),(0,t.jsxs)("div",{className:r.default.buttonGroup,children:[(0,t.jsx)("button",{type:"submit",className:r.default.saveButton,disabled:c,children:c?"Saving...":"Save Changes"}),(0,t.jsx)(s.default,{href:"/admin/users",className:r.default.cancelButton,children:"Cancel"})]})]})]})}e.s(["default",()=>l])}]);